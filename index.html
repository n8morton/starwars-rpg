<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="reset.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <!-- helloworld -->
    <container id="main-container">
        <div id="game-window" style="background-image:url(images/jabbabg1.png)">
        </div>
    </container>
    <script>
        // declare main variables
        var startButton = $("<button>");
        var sbText = $("<p>");
        var promptWindow = $("<div>");
        var selectA = $("<div>");
        var selectB = $("<div>");
        var selectC = $("<div>");
        var selectD = $("<div>");
        var textBox = $("<p>");
        var playerVs = $("<div>");
        var opponentVs = $("<div>");
        var roundText = $("<p>");
        var fightButton = $("<button>");
        var fbText = $("<p>");
        var vsWindow = $("<div id=vsvsvs>");
        var bobaVs = $("<img src=images/bobavs.png>");
        var ig88Vs = $("<img src=images/ig88vs.png>");
        var bosskVs = $("<img src=images/bosskvs.png>");
        var zuckussVs = $("<img src=images/zuckussvs.png>");
        var bobaVsMirror = $("<img src=images/bobavsmirror.png>");
        var ig88VsMirror = $("<img src=images/ig88vsmirror.png>");
        var bosskVsMirror = $("<img src=images/bosskvsmirror.png>");
        var zuckussVsMirror = $("<img src=images/zuckussvsmirror.png>");
        var bobaText = $("<img src=images/bobatext.png>");
        var bosskText = $("<img src=images/bossktext.png>");
        var ig88Text = $("<img src=images/ig88text.png>");
        var zuckussText = $("<img src=images/zuckusstext.png>");
        var bobaTextMirror = $("<img src=images/bobatextmirror.png>");
        var bosskTextMirror = $("<img src=images/bossktextmirror.png>");
        var ig88TextMirror = $("<img src=images/ig88textmirror.png>");
        var zuckussTextMirror = $("<img src=images/zuckusstextmirror.png>");
        var vsLogo = $("<img src=images/vs.png>");
        var bobaFight = $("<img src=images/bobafight.png>");
        var bosskFight = $("<img src=images/bosskfight.png>");
        var ig88Fight = $("<img src=images/ig88fight.png>");
        var zuckussFight = $("<img src=images/zuckussfight.png>");
        var bobaFightMirror = $("<img src=images/bobafightmirror.png>");
        var bosskFightMirror = $("<img src=images/bosskfightmirror.png>");
        var ig88FightMirror = $("<img src=images/ig88fightmirror.png>");
        var zuckussFightMirror = $("<img src=images/zuckussfightmirror.png>");
        var fightWindow = $("<div>");
        var playerLifebar = $("<div>");
        var opponentLifebar = $("<div>");
        var playerLife = $("<div>");
        var opponentLife = $("<div>");
        var currentPlayer = "none";
        var currentOpponent
        var playerHp
        var playerMaxHp
        var playerLifePercent
        var playerAtk
        var playerBaseAtk
        var opponentHp
        var opponentMaxHp
        var opponentLifePercent
        var opponentAtk
        var fightText = $("<p>");
        var playerStatus = $("<p>");
        var opponentStatus = $("<p>");
        var attackButton = $("<button>");
        var abText = $("<p>");
        var winCount = 0;
        var vsMusic = new Audio("audio/vs.mp3");
        var fightMusic = new Audio("audio/fightmusic.mp3");
        var reveal = function (x) { x.show() };
        var resetButton=$("<button id=reset-button>");
        var charA = {
            "Name": "Boba Fett",
            "Health": 160,
            "Attack": 8,
            "CounterAttack": 15,
        };
        var charB = {
            "Name": "Bossk",
            "Health": 170,
            "Attack": 7,
            "CounterAttack": 10,
        };
        var charC = {
            "Name": "IG-88",
            "Health": 140,
            "Attack": 12,
            "CounterAttack": 15,
        };
        var charD = {
            "Name": "Zuckuss",
            "Health": 180,
            "Attack": 5,
            "CounterAttack": 20,
        };

        // set classes
        startButton.addClass("start-button");
        sbText.addClass("sb-text");
        promptWindow.addClass("prompt-window");
        selectA.addClass("select-a select-all").data("character", charA);
        selectB.addClass("select-b select-all").data("character", charB);
        selectC.addClass("select-c select-all").data("character", charC);
        selectD.addClass("select-d select-all").data("character", charD);
        textBox.addClass("text-box");
        playerVs.addClass("player-vs");
        opponentVs.addClass("opponent-vs");
        vsWindow.addClass("vs-window");
        roundText.addClass("round-text vs-screen");
        vsLogo.addClass("vs-logo vs-screen");
        fightButton.addClass("fight-button vs-screen");
        fbText.addClass("fb-text  vs-screen");
        bobaVs.addClass("boba-vs vs-screen vs-image");
        ig88Vs.addClass("ig88-vs vs-screen vs-image");
        bosskVs.addClass("bossk-vs vs-screen vs-image");
        zuckussVs.addClass("zuckuss-vs vs-screen vs-image");
        bobaVsMirror.addClass("boba-vs-mirror vs-screen vs-image-mirror");
        ig88VsMirror.addClass("ig88-vs-mirror vs-screen vs-image-mirror");
        bosskVsMirror.addClass("bossk-vs-mirror vs-screen vs-image-mirror");
        zuckussVsMirror.addClass("zuckuss-vs-mirror vs-screen vs-image-mirror");
        bobaText.addClass("boba-text vs-text vs-screen");
        bosskText.addClass("bossk-text vs-text vs-screen");
        ig88Text.addClass("ig88-text vs-text vs-screen");
        zuckussText.addClass("zuckuss-text vs-text vs-screen");
        bobaTextMirror.addClass("boba-text-mirror vs-text-mirror vs-screen");
        bosskTextMirror.addClass("bossk-text-mirror vs-text-mirror vs-screen");
        ig88TextMirror.addClass("ig88-text-mirror vs-text-mirror vs-screen");
        zuckussTextMirror.addClass("zuckuss-text-mirror vs-text-mirror vs-screen");
        attackButton.addClass("attack-button fight-screen");
        abText.addClass("ab-text fight-screen");
        fightText.addClass("fight-text fight-screen");
        playerStatus.addClass("player-status fight-screen");
        opponentStatus.addClass("opponent-status fight-screen");
        fightWindow.addClass("fight-window fight-screen");
        bobaFight.addClass("boba-fight fight-screen");
        bosskFight.addClass("bossk-fight fight-screen");
        ig88Fight.addClass("ig88-fight fight-screen");
        zuckussFight.addClass("zuckuss-fight fight-screen");
        bobaFightMirror.addClass("boba-fight-mirror fight-screen");
        bosskFightMirror.addClass("bossk-fight-mirror fight-screen");
        ig88FightMirror.addClass("ig88-fight-mirror fight-screen");
        zuckussFightMirror.addClass("zuckuss-fight-mirror fight-screen");
        playerLifebar.addClass("player-lifebar fight-screen");
        playerLife.addClass("player-life fight-screen");
        opponentLifebar.addClass("opponent-lifebar fight-screen");
        opponentLife.addClass("opponent-life fight-screen");

        $("#game-window").append(startButton, promptWindow, vsWindow, fightWindow);
        $(".start-button").append(sbText);
        $(".sb-text").text("Click To Start");
        $(".prompt-window").append(textBox, selectA, selectB, selectC, selectD).hide();
        $(".text-box").text("Please Select Your Character");
        $(".vs-window").append(fightButton, roundText, vsLogo, bobaVs, ig88Vs, bosskVs, zuckussVs, bobaVsMirror, ig88VsMirror, bosskVsMirror, zuckussVsMirror, bobaText, bobaTextMirror, ig88Text, ig88TextMirror, bosskText, bosskTextMirror, zuckussText, zuckussTextMirror)
        $(".round-text").text("Round 1");
        $(".vs-screen").hide();
        $(".fight-button").append(fbText);
        $(".fb-text").text("FIGHT!");
        $(".vs-window").hide();
        $(".boba-vs").attr("id", "boba-reveal");
        $(".bossk-vs").attr("id", "bossk-reveal");
        $(".ig88-vs").attr("id", "ig88-reveal");
        $(".zuckuss-vs").attr("id", "zuckuss-reveal");
        $(".boba-vs-mirror").attr("id", "boba-mirror-reveal");
        $(".bossk-vs-mirror").attr("id", "bossk-mirror-reveal");
        $(".ig88-vs-mirror").attr("id", "ig88-mirror-reveal");
        $(".zuckuss-vs-mirror").attr("id", "zuckuss-mirror-reveal");
        $(".boba-text").attr("id", "boba-text-reveal");
        $(".bossk-text").attr("id", "bossk-text-reveal");
        $(".ig88-text").attr("id", "ig88-text-reveal");
        $(".zuckuss-text").attr("id", "zuckuss-text-reveal");
        $(".boba-text-mirror").attr("id", "boba-text-mirror-reveal");
        $(".bossk-text-mirror").attr("id", "bossk-text-mirror-reveal");
        $(".ig88-text-mirror").attr("id", "ig88-text-mirror-reveal");
        $(".zuckuss-text-mirror").attr("id", "zuckuss-text-mirror-reveal");
        $(".fight-window").append(resetButton, attackButton, fightText, playerStatus, opponentStatus, playerLifebar, opponentLifebar, bobaFight, bobaFightMirror, bosskFight, bosskFightMirror, ig88Fight, ig88FightMirror, zuckussFight, zuckussFightMirror).hide();
        $(".attack-button").append(abText);
        $(".ab-text").text("Click To Attack");
        $(".player-lifebar").append(playerLife);
        $(".opponent-lifebar").append(opponentLife);
        resetButton.text("Click To Play Again").hide();

        function lifePercent(lp, hp, maxHp) {
            lp = ((hp / maxHp) * 100);
            return lp;
        }
        function vsReveal() {

            var image = document.getElementById("vsvsvs")
            var pos = 681
            var id = setInterval(frame, 7);
            function frame() {
                if (pos == 0) {
                    clearInterval(id);
                } else {
                    pos--;
                    pos--;
                    pos--;
                    image.style.top = pos + "px";
                }
            }
        }
        function charRevealLeft(charId) {

            var image = document.getElementById(charId)
            var pos = -576;
            var id = setInterval(frame, 5);
            function frame() {
                if (pos == 0) {
                    clearInterval(id);
                } else {
                    pos++;
                    pos++;
                    image.style.left = pos + "px";
                }
            }
        }
        function charRevealRight(charId) {

            var image = document.getElementById(charId)
            var pos = -576;
            var id = setInterval(frame, 5);
            function frame() {
                if (pos == 0) {
                    clearInterval(id);
                } else {
                    pos++;
                    pos++;
                    image.style.right = pos + "px";
                }
            }
        }
        function textRevealLeft(textId) {

            var image = document.getElementById(textId)
            var pos = 1280;
            var id = setInterval(frame, 1);
            function frame() {
                if (pos == 60) {
                    clearInterval(id);
                } else {
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    image.style.left = pos + "px";
                }
            }
        }
        function textRevealRight(textId) {

            var image = document.getElementById(textId)
            var pos = 1280;
            var id = setInterval(frame, 1);
            function frame() {
                if (pos == 60) {
                    clearInterval(id);
                } else {
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;
                    pos--;

                    image.style.right = pos + "px";
                }
            }
        }

        function reset(){

        }

        // click to start game
        $(".start-button").click(function () {
            $(".start-button").hide();
            $(".prompt-window").show();
        });

        // user selects thier character
        $(".select-all").click(function () {
            if (currentPlayer == "none") {
                currentPlayer = $(this).data("character");
                $(this).hide();
                $(".text-box").text("Please Select Your First Opponent");
                $(".prompt-window").css("width", "700").css("left", "260px");
                $(".select-all").css("width", "28%").css("margin-left", "3.75%")
            }
            else {
                currentOpponent = $(this).data("character");
                $(".prompt-window").hide();
                $(this).hide();
                $(".vs-screen").show();
                console.log(currentPlayer, currentOpponent);
                bobaVs.hide();
                ig88Vs.hide();
                bosskVs.hide();
                zuckussVs.hide();
                bobaVsMirror.hide();
                ig88VsMirror.hide();
                bosskVsMirror.hide();
                zuckussVsMirror.hide();
                $(".vs-window").show();
                $(".vs-text").hide();
                $(".vs-text-mirror").hide();
                $(".vs-image").css({ "left": "-600px" });
                $(".vs-image-mirror").css({ "right": "-600px" });
                $(".vs-text").css({ "left": "-1280px" });
                $(".vs-text-mirror").css({ "right": "-1280px" });

                if (winCount == 0) {
                    playerHp = currentPlayer.Health;
                    playerAtk = currentPlayer.Attack;
                    playerMaxHp = playerHp;
                };

                playerBaseAtk = currentPlayer.Attack;
                opponentHp = currentOpponent.Health;
                opponentAtk = currentOpponent.CounterAttack;
                opponentMaxHp = opponentHp;
                $(".opponent-life").css("width", ((opponentHp / opponentMaxHp) * 100) + "%");
                $(".round-text").text("Round " + (winCount+1));

                vsMusic.play();
                vsReveal();

                if (currentPlayer.Name == "Boba Fett") {
                    bobaVs.show();
                    setTimeout(charRevealLeft.bind(null, "boba-reveal"), 1500);
                    bobaText.show();
                    setTimeout(textRevealLeft.bind(null, "boba-text-reveal"), 3000);
                }
                if (currentPlayer.Name == "Bossk") {
                    bosskVs.show();
                    setTimeout(charRevealLeft.bind(null, "bossk-reveal"), 1500);
                    bosskText.show();
                    setTimeout(textRevealLeft.bind(null, "bossk-text-reveal"), 3000);
                }
                if (currentPlayer.Name == "IG-88") {
                    ig88Vs.show();
                    setTimeout(charRevealLeft.bind(null, "ig88-reveal"), 1500);
                    ig88Text.show();
                    setTimeout(textRevealLeft.bind(null, "ig88-text-reveal"), 3000);
                }
                if (currentPlayer.Name == "Zuckuss") {
                    zuckussVs.show();
                    setTimeout(charRevealLeft.bind(null, "zuckuss-reveal"), 1500);
                    zuckussText.show();
                    setTimeout(textRevealLeft.bind(null, "zuckuss-text-reveal"), 3000);
                }
                if (currentOpponent.Name == "Boba Fett") {
                    bobaVsMirror.show();
                    setTimeout(charRevealRight.bind(null, "boba-mirror-reveal"), 1500);
                    bobaTextMirror.show();
                    setTimeout(textRevealRight.bind(null, "boba-text-mirror-reveal"), 4000);
                }
                if (currentOpponent.Name == "Bossk") {
                    bosskVsMirror.show();
                    setTimeout(charRevealRight.bind(null, "bossk-mirror-reveal"), 1500);
                    bosskTextMirror.show();
                    setTimeout(textRevealRight.bind(null, "bossk-text-mirror-reveal"), 4000);
                }
                if (currentOpponent.Name == "IG-88") {

                    ig88VsMirror.show();
                    setTimeout(charRevealRight.bind(null, "ig88-mirror-reveal"), 1500);
                    ig88TextMirror.show();
                    setTimeout(textRevealRight.bind(null, "ig88-text-mirror-reveal"), 4000);
                }
                if (currentOpponent.Name == "Zuckuss") {

                    zuckussVsMirror.show();
                    setTimeout(charRevealRight.bind(null, "zuckuss-mirror-reveal"), 1500);
                    zuckussTextMirror.show();
                    setTimeout(textRevealRight.bind(null, "zuckuss-text-mirror-reveal"), 4000);
                }
            }
        });
        $(".fight-button").click(function () {
            $(".fight-button").hide();
            $(".round-text").hide();
            $(".fight-window").show();
            $(".vs-window").hide();
            vsMusic.pause();
            vsMusic.currentTime = 0;
            fightMusic.play();

           

            bobaFight.hide();
            ig88Fight.hide();
            bosskFight.hide();
            zuckussFight.hide();
            bobaFightMirror.hide();
            ig88FightMirror.hide();
            bosskFightMirror.hide();
            zuckussFightMirror.hide();

            if (currentPlayer.Name == "Boba Fett") {
                bobaFight.show();
            }
            if (currentPlayer.Name == "Bossk") {
                bosskFight.show();
            }
            if (currentPlayer.Name == "IG-88") {
                ig88Fight.show();
            }
            if (currentPlayer.Name == "Zuckuss") {
                zuckussFight.show();
            }
            if (currentOpponent.Name == "Boba Fett") {
                bobaFightMirror.show();
            }
            if (currentOpponent.Name == "Bossk") {
                bosskFightMirror.show();
            }
            if (currentOpponent.Name == "IG-88") {
                ig88FightMirror.show();
            }
            if (currentOpponent.Name == "Zuckuss") {
                zuckussFightMirror.show();
            }
            $(".player-status").html("Current Health:" + playerHp + "<br> Attack Power:" + playerAtk);
            $(".opponent-status").html("Current Health:" + opponentHp + "<br> Attack Power:" + opponentAtk);
        });

        $(".attack-button").click(function () {
            opponentHp = (opponentHp - playerAtk);
            playerHp = (playerHp - opponentAtk);
            playerAtk = (playerAtk + playerBaseAtk);
            // lifePercent(playerLifePercent, playerHp, playerMaxHp);
            // console.log(playerLifePercent);
            $(".player-life").css("width", ((playerHp / playerMaxHp) * 100) + "%");
            $(".opponent-life").css("width", ((opponentHp / opponentMaxHp) * 100) + "%");

            $(".player-status").html("Current Health:" + playerHp + "<br> Current Attack Power:" + playerAtk);
            $(".opponent-status").html("Current Health:" + opponentHp + "<br> Attack Power:" + opponentAtk);

            if (playerHp < 1) {
                $(".fight-screen").hide();
                $(".vs-screen").hide();
                $(".fight-text").show();
                $(".fight-window").show();
                $(".fight-text").html("GAME OVER<br>Play Again?").show()
                resetButton.show();
                fightMusic.pause();
                fightMusic.currentTime = 0;
            } else if (opponentHp < 1) {
                $(".fight-window").hide();
                $(".vs-screen").hide();
                $(".text-box").text("Please Select Your Next Opponent");
                $(".prompt-window").show()
                $(".fight-window").hide();
                bobaVs.hide();
                ig88Vs.hide();
                bosskVs.hide();
                zuckussVs.hide();
                fightMusic.pause();
                fightMusic.currentTime = 0;
                winCount++;

                if (winCount > 2) {
                    $(".fight-screen").hide();
                    $(".vs-screen").hide();
                    $(".fight-text").show();
                    $(".fight-window").show();
                    $(".fight-text").html("CONGRATULATIONS!<BR>YOU WIN!<BR>Play Again?").show();
                    $(".prompt-window").hide();
                    resetButton.show();
                }
            }
        });
    </script>
</body>

</html>